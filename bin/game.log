msg_queue ctor
msg_queue ctor
init network start
load game_server config, ip:192.168.80.3, port:3333
init network start
epoll add new socket 4
load db_server config, ip:192.168.80.3, port:5555
client addr is 55617728 : 56039
epoll add new socket 5
debug: m_listenfd is 4
epoll add new socket 6
go next epoll
Epoll event EPOLLIN fd = 6
new message, fd is 6
message enqueue, pos = 0, flag is 0
start recv msg data head
bug bug bug fd = 6, m_in = 134, m_out = 0, _length = 16
recv 16 byte data
msg decode head
msg decode head end
msg data body len is 118
recv 118 byte data
recv msg complete
message enqueue, pos = 1, flag is 0
start recv msg data head
bug bug bug fd = 6, m_in = 134, m_out = 134, _length = 16
Net::recvmsg errorid = -2
, /home/blue/Code/TcpDemo/Net/Net.cpp:203
go next epoll
message dequeue, pos = 0, flag is 1
msg type is 16
player login, id = 172542746
msg decode pb
player name: dog, id: 172542746
player posx: 0.000000, posz: 54.349998, speed 5
ItemFactory createItem type is 1
createItem end
add item id = 1, count is 98
ItemFactory createItem type is 1
createItem end
add item id = 2, count is 98
ItemFactory createItem type is 2
createItem end
add item id = 3, count is 1
ItemFactory createItem type is 2
createItem end
add item id = 4, count is 1
inventory init end
Epoll event EPOLLIN fd = 6
new message, fd is 6
message enqueue, pos = 2, flag is 0
start recv msg data head
bug bug bug fd = 6, m_in = 155, m_out = 134, _length = 16
recv 16 byte data
msg decode head
msg decode head end
msg data body len is 5
recv 5 byte data
recv msg complete
message enqueue, pos = 3, flag is 0
start recv msg data head
bug bug bug fd = 6, m_in = 155, m_out = 155, _length = 16
Net::recvmsg errorid = -2
, /home/blue/Code/TcpDemo/Net/Net.cpp:203
go next epoll
message dequeue, pos = 2, flag is 1
msg type is 3
msg decode pb
new op h = 0.000000, v = 1.000000
passtime is 22135.000000
speed is 5, old op h = 0.000000, v = 0.000000
player posx = 0.000000, posz = 54.349998
message enqueue, pos = 0, flag is 0
test PlayerGetPlayerInfo
new op h = 0.000000, v = 1.000000
passtime is 0.000000
speed is 5, old op h = 0.000000, v = 1.000000
player posx = 0.000000, posz = 54.349998
PlayerGetPlayerInfo end
msg encode head
USR_SYNC END, usrid is 172542746
Epoll event EPOLLIN fd = 6
new message, fd is 6
message enqueue, pos = 4, flag is 0
start recv msg data head
bug bug bug fd = 6, m_in = 171, m_out = 155, _length = 16
recv 16 byte data
msg decode head
msg decode head end
msg data body len is 0
recv 0 byte data
recv msg complete
message enqueue, pos = 5, flag is 0
start recv msg data head
bug bug bug fd = 6, m_in = 171, m_out = 171, _length = 16
Net::recvmsg errorid = -2
, /home/blue/Code/TcpDemo/Net/Net.cpp:203
go next epoll
message dequeue, pos = 4, flag is 1
msg type is 3
msg decode pb
new op h = 0.000000, v = 0.000000
passtime is 254.000000
speed is 5, old op h = 0.000000, v = 1.000000
player posx = 0.000000, posz = 55.619999
message enqueue, pos = 1, flag is 0
test PlayerGetPlayerInfo
new op h = 0.000000, v = 0.000000
passtime is 0.000000
speed is 5, old op h = 0.000000, v = 0.000000
player posx = 0.000000, posz = 55.619999
PlayerGetPlayerInfo end
msg encode head
USR_SYNC END, usrid is 172542746
message dequeue, pos = 0, flag is 1
msg encode head
send data to fd 6, len is 48
send data success left should be 0: 0
message dequeue, pos = 1, flag is 1
msg encode head
send data to fd 6, len is 43
send data success left should be 0: 0
Epoll event EPOLLIN fd = 6
new message, fd is 6
message enqueue, pos = 6, flag is 0
start recv msg data head
bug bug bug fd = 6, m_in = 192, m_out = 171, _length = 16
recv 16 byte data
msg decode head
msg decode head end
msg data body len is 5
recv 5 byte data
recv msg complete
message enqueue, pos = 7, flag is 0
start recv msg data head
bug bug bug fd = 6, m_in = 192, m_out = 192, _length = 16
Net::recvmsg errorid = -2
, /home/blue/Code/TcpDemo/Net/Net.cpp:203
go next epoll
message dequeue, pos = 6, flag is 1
msg type is 3
msg decode pb
new op h = 0.000000, v = 1.000000
passtime is 8175.000000
speed is 5, old op h = 0.000000, v = 0.000000
player posx = 0.000000, posz = 55.619999
message enqueue, pos = 2, flag is 0
test PlayerGetPlayerInfo
new op h = 0.000000, v = 1.000000
passtime is 0.000000
speed is 5, old op h = 0.000000, v = 1.000000
player posx = 0.000000, posz = 55.619999
PlayerGetPlayerInfo end
msg encode head
USR_SYNC END, usrid is 172542746
Epoll event EPOLLIN fd = 6
new message, fd is 6
message enqueue, pos = 8, flag is 0
start recv msg data head
bug bug bug fd = 6, m_in = 208, m_out = 192, _length = 16
recv 16 byte data
msg decode head
msg decode head end
msg data body len is 0
recv 0 byte data
recv msg complete
message enqueue, pos = 9, flag is 0
start recv msg data head
bug bug bug fd = 6, m_in = 208, m_out = 208, _length = 16
Net::recvmsg errorid = -2
, /home/blue/Code/TcpDemo/Net/Net.cpp:203
go next epoll
message dequeue, pos = 8, flag is 1
msg type is 3
msg decode pb
new op h = 0.000000, v = 0.000000
passtime is 101.000000
speed is 5, old op h = 0.000000, v = 1.000000
player posx = 0.000000, posz = 56.125000
message enqueue, pos = 3, flag is 0
test PlayerGetPlayerInfo
new op h = 0.000000, v = 0.000000
passtime is 0.000000
speed is 5, old op h = 0.000000, v = 0.000000
player posx = 0.000000, posz = 56.125000
PlayerGetPlayerInfo end
msg encode head
USR_SYNC END, usrid is 172542746
message dequeue, pos = 2, flag is 1
msg encode head
send data to fd 6, len is 48
send data success left should be 0: 0
message dequeue, pos = 3, flag is 1
msg encode head
send data to fd 6, len is 43
send data success left should be 0: 0
Epoll event EPOLLIN fd = 6
new message, fd is 6
message enqueue, pos = 10, flag is 0
start recv msg data head
bug bug bug fd = 6, m_in = 229, m_out = 208, _length = 16
recv 16 byte data
msg decode head
msg decode head end
msg data body len is 5
recv 5 byte data
recv msg complete
message enqueue, pos = 11, flag is 0
start recv msg data head
bug bug bug fd = 6, m_in = 229, m_out = 229, _length = 16
Net::recvmsg errorid = -2
, /home/blue/Code/TcpDemo/Net/Net.cpp:203
go next epoll
message dequeue, pos = 10, flag is 1
msg type is 3
msg decode pb
new op h = 0.000000, v = 1.000000
passtime is 1883.000000
speed is 5, old op h = 0.000000, v = 0.000000
player posx = 0.000000, posz = 56.125000
message enqueue, pos = 4, flag is 0
test PlayerGetPlayerInfo
new op h = 0.000000, v = 1.000000
passtime is 0.000000
speed is 5, old op h = 0.000000, v = 1.000000
player posx = 0.000000, posz = 56.125000
PlayerGetPlayerInfo end
msg encode head
USR_SYNC END, usrid is 172542746
Epoll event EPOLLIN fd = 6
new message, fd is 6
message enqueue, pos = 12, flag is 0
start recv msg data head
bug bug bug fd = 6, m_in = 245, m_out = 229, _length = 16
recv 16 byte data
msg decode head
msg decode head end
msg data body len is 0
recv 0 byte data
recv msg complete
message enqueue, pos = 13, flag is 0
start recv msg data head
bug bug bug fd = 6, m_in = 245, m_out = 245, _length = 16
Net::recvmsg errorid = -2
, /home/blue/Code/TcpDemo/Net/Net.cpp:203
go next epoll
message dequeue, pos = 12, flag is 1
msg type is 3
msg decode pb
new op h = 0.000000, v = 0.000000
passtime is 358.000000
speed is 5, old op h = 0.000000, v = 1.000000
player posx = 0.000000, posz = 57.915001
message enqueue, pos = 5, flag is 0
test PlayerGetPlayerInfo
new op h = 0.000000, v = 0.000000
passtime is 0.000000
speed is 5, old op h = 0.000000, v = 0.000000
player posx = 0.000000, posz = 57.915001
PlayerGetPlayerInfo end
msg encode head
USR_SYNC END, usrid is 172542746
message dequeue, pos = 4, flag is 1
msg encode head
send data to fd 6, len is 48
send data success left should be 0: 0
message dequeue, pos = 5, flag is 1
msg encode head
send data to fd 6, len is 43
send data success left should be 0: 0
Epoll event EPOLLIN fd = 6
new message, fd is 6
message enqueue, pos = 14, flag is 0
start recv msg data head
bug bug bug fd = 6, m_in = 266, m_out = 245, _length = 16
recv 16 byte data
msg decode head
msg decode head end
msg data body len is 5
recv 5 byte data
recv msg complete
message enqueue, pos = 15, flag is 0
start recv msg data head
bug bug bug fd = 6, m_in = 266, m_out = 266, _length = 16
Net::recvmsg errorid = -2
, /home/blue/Code/TcpDemo/Net/Net.cpp:203
go next epoll
message dequeue, pos = 14, flag is 1
msg type is 3
msg decode pb
new op h = 0.000000, v = 1.000000
passtime is 5284.000000
speed is 5, old op h = 0.000000, v = 0.000000
player posx = 0.000000, posz = 57.915001
message enqueue, pos = 6, flag is 0
test PlayerGetPlayerInfo
new op h = 0.000000, v = 1.000000
passtime is 0.000000
speed is 5, old op h = 0.000000, v = 1.000000
player posx = 0.000000, posz = 57.915001
PlayerGetPlayerInfo end
msg encode head
USR_SYNC END, usrid is 172542746
message dequeue, pos = 6, flag is 1
msg encode head
send data to fd 6, len is 48
send data success left should be 0: 0
Epoll event EPOLLIN fd = 6
new message, fd is 6
message enqueue, pos = 16, flag is 0
start recv msg data head
bug bug bug fd = 6, m_in = 282, m_out = 266, _length = 16
recv 16 byte data
msg decode head
msg decode head end
msg data body len is 0
recv 0 byte data
recv msg complete
message enqueue, pos = 17, flag is 0
start recv msg data head
bug bug bug fd = 6, m_in = 282, m_out = 282, _length = 16
Net::recvmsg errorid = -2
, /home/blue/Code/TcpDemo/Net/Net.cpp:203
go next epoll
message dequeue, pos = 16, flag is 1
msg type is 3
msg decode pb
new op h = 0.000000, v = 0.000000
passtime is 2137.000000
speed is 5, old op h = 0.000000, v = 1.000000
player posx = 0.000000, posz = 68.599998
message enqueue, pos = 7, flag is 0
test PlayerGetPlayerInfo
new op h = 0.000000, v = 0.000000
passtime is 0.000000
speed is 5, old op h = 0.000000, v = 0.000000
player posx = 0.000000, posz = 68.599998
PlayerGetPlayerInfo end
msg encode head
USR_SYNC END, usrid is 172542746
message dequeue, pos = 7, flag is 1
msg encode head
send data to fd 6, len is 43
send data success left should be 0: 0
Epoll event EPOLLIN fd = 6
new message, fd is 6
message enqueue, pos = 18, flag is 0
start recv msg data head
bug bug bug fd = 6, m_in = 303, m_out = 282, _length = 16
recv 16 byte data
msg decode head
msg decode head end
msg data body len is 5
recv 5 byte data
recv msg complete
message enqueue, pos = 19, flag is 0
start recv msg data head
bug bug bug fd = 6, m_in = 303, m_out = 303, _length = 16
Net::recvmsg errorid = -2
, /home/blue/Code/TcpDemo/Net/Net.cpp:203
go next epoll
message dequeue, pos = 18, flag is 1
msg type is 3
msg decode pb
new op h = 0.000000, v = 1.000000
passtime is 18771.000000
speed is 5, old op h = 0.000000, v = 0.000000
player posx = 0.000000, posz = 68.599998
message enqueue, pos = 8, flag is 0
test PlayerGetPlayerInfo
new op h = 0.000000, v = 1.000000
passtime is 0.000000
speed is 5, old op h = 0.000000, v = 1.000000
player posx = 0.000000, posz = 68.599998
PlayerGetPlayerInfo end
msg encode head
USR_SYNC END, usrid is 172542746
message dequeue, pos = 8, flag is 1
msg encode head
send data to fd 6, len is 48
send data success left should be 0: 0
Epoll event EPOLLIN fd = 6
new message, fd is 6
message enqueue, pos = 20, flag is 0
start recv msg data head
bug bug bug fd = 6, m_in = 329, m_out = 303, _length = 16
recv 16 byte data
msg decode head
msg decode head end
msg data body len is 10
recv 10 byte data
recv msg complete
message enqueue, pos = 21, flag is 0
start recv msg data head
bug bug bug fd = 6, m_in = 329, m_out = 329, _length = 16
Net::recvmsg errorid = -2
, /home/blue/Code/TcpDemo/Net/Net.cpp:203
go next epoll
message dequeue, pos = 20, flag is 1
msg type is 3
msg decode pb
new op h = -1.000000, v = 1.000000
passtime is 1421.000000
speed is 5, old op h = 0.000000, v = 1.000000
player posx = 0.000000, posz = 75.705002
message enqueue, pos = 9, flag is 0
test PlayerGetPlayerInfo
new op h = -1.000000, v = 1.000000
passtime is 0.000000
speed is 5, old op h = -1.000000, v = 1.000000
player posx = 0.000000, posz = 75.705002
PlayerGetPlayerInfo end
msg encode head
USR_SYNC END, usrid is 172542746
Epoll event EPOLLIN fd = 6
new message, fd is 6
message enqueue, pos = 22, flag is 0
start recv msg data head
bug bug bug fd = 6, m_in = 350, m_out = 329, _length = 16
recv 16 byte data
msg decode head
msg decode head end
msg data body len is 5
recv 5 byte data
recv msg complete
message enqueue, pos = 23, flag is 0
start recv msg data head
bug bug bug fd = 6, m_in = 350, m_out = 350, _length = 16
Net::recvmsg errorid = -2
, /home/blue/Code/TcpDemo/Net/Net.cpp:203
go next epoll
message dequeue, pos = 22, flag is 1
msg type is 3
msg decode pb
new op h = -1.000000, v = 0.000000
passtime is 252.000000
speed is 5, old op h = -1.000000, v = 1.000000
player posx = -1.260000, posz = 76.965004
message enqueue, pos = 10, flag is 0
test PlayerGetPlayerInfo
new op h = -1.000000, v = 0.000000
passtime is 0.000000
speed is 5, old op h = -1.000000, v = 0.000000
player posx = -1.260000, posz = 76.965004
PlayerGetPlayerInfo end
msg encode head
USR_SYNC END, usrid is 172542746
message dequeue, pos = 9, flag is 1
msg encode head
send data to fd 6, len is 53
send data success left should be 0: 0
message dequeue, pos = 10, flag is 1
msg encode head
send data to fd 6, len is 53
send data success left should be 0: 0
Epoll event EPOLLIN fd = 6
new message, fd is 6
message enqueue, pos = 24, flag is 0
start recv msg data head
bug bug bug fd = 6, m_in = 366, m_out = 350, _length = 16
recv 16 byte data
msg decode head
msg decode head end
msg data body len is 0
recv 0 byte data
recv msg complete
message enqueue, pos = 25, flag is 0
start recv msg data head
bug bug bug fd = 6, m_in = 366, m_out = 366, _length = 16
Net::recvmsg errorid = -2
, /home/blue/Code/TcpDemo/Net/Net.cpp:203
go next epoll
message dequeue, pos = 24, flag is 1
msg type is 3
msg decode pb
new op h = 0.000000, v = 0.000000
passtime is 662.000000
speed is 5, old op h = -1.000000, v = 0.000000
player posx = -4.570000, posz = 76.965004
message enqueue, pos = 11, flag is 0
test PlayerGetPlayerInfo
new op h = 0.000000, v = 0.000000
passtime is 0.000000
speed is 5, old op h = 0.000000, v = 0.000000
player posx = -4.570000, posz = 76.965004
PlayerGetPlayerInfo end
msg encode head
USR_SYNC END, usrid is 172542746
message dequeue, pos = 11, flag is 1
msg encode head
send data to fd 6, len is 48
send data success left should be 0: 0
Epoll event EPOLLIN fd = 6
new message, fd is 6
message enqueue, pos = 26, flag is 0
start recv msg data head
bug bug bug fd = 6, m_in = 387, m_out = 366, _length = 16
recv 16 byte data
msg decode head
msg decode head end
msg data body len is 5
recv 5 byte data
recv msg complete
message enqueue, pos = 27, flag is 0
start recv msg data head
bug bug bug fd = 6, m_in = 387, m_out = 387, _length = 16
Net::recvmsg errorid = -2
, /home/blue/Code/TcpDemo/Net/Net.cpp:203
go next epoll
message dequeue, pos = 26, flag is 1
msg type is 3
msg decode pb
new op h = 0.000000, v = 1.000000
passtime is 30786.000000
speed is 5, old op h = 0.000000, v = 0.000000
player posx = -4.570000, posz = 76.965004
message enqueue, pos = 12, flag is 0
test PlayerGetPlayerInfo
new op h = 0.000000, v = 1.000000
passtime is 0.000000
speed is 5, old op h = 0.000000, v = 1.000000
player posx = -4.570000, posz = 76.965004
PlayerGetPlayerInfo end
msg encode head
USR_SYNC END, usrid is 172542746
message dequeue, pos = 12, flag is 1
msg encode head
send data to fd 6, len is 53
send data success left should be 0: 0
Epoll event EPOLLIN fd = 6
new message, fd is 6
message enqueue, pos = 28, flag is 0
start recv msg data head
bug bug bug fd = 6, m_in = 403, m_out = 387, _length = 16
recv 16 byte data
msg decode head
msg decode head end
msg data body len is 0
recv 0 byte data
recv msg complete
message enqueue, pos = 29, flag is 0
start recv msg data head
bug bug bug fd = 6, m_in = 403, m_out = 403, _length = 16
Net::recvmsg errorid = -2
, /home/blue/Code/TcpDemo/Net/Net.cpp:203
go next epoll
message dequeue, pos = 28, flag is 1
msg type is 3
msg decode pb
new op h = 0.000000, v = 0.000000
passtime is 1019.000000
speed is 5, old op h = 0.000000, v = 1.000000
player posx = -4.570000, posz = 82.060005
message enqueue, pos = 13, flag is 0
test PlayerGetPlayerInfo
new op h = 0.000000, v = 0.000000
passtime is 0.000000
speed is 5, old op h = 0.000000, v = 0.000000
player posx = -4.570000, posz = 82.060005
PlayerGetPlayerInfo end
msg encode head
USR_SYNC END, usrid is 172542746
message dequeue, pos = 13, flag is 1
msg encode head
send data to fd 6, len is 48
send data success left should be 0: 0
Epoll event EPOLLIN fd = 6
new message, fd is 6
message enqueue, pos = 30, flag is 0
start recv msg data head
bug bug bug fd = 6, m_in = 419, m_out = 403, _length = 16
recv 16 byte data
msg decode head
msg decode head end
msg data body len is 0
recv 0 byte data
recv msg complete
message enqueue, pos = 31, flag is 0
start recv msg data head
bug bug bug fd = 6, m_in = 419, m_out = 419, _length = 16
Net::recvmsg errorid = -2
, /home/blue/Code/TcpDemo/Net/Net.cpp:203
go next epoll
message dequeue, pos = 30, flag is 1
msg type is 1
player exit ! id = 172542746
message enqueue, pos = 14, flag is 0
test PlayerGetPlayerInfo
new op h = 0.000000, v = 0.000000
passtime is 71447.000000
speed is 5, old op h = 0.000000, v = 0.000000
player posx = -4.570000, posz = 82.060005
PlayerGetPlayerInfo end
msg encode head
message enqueue, pos = 15, flag is 0
usrid 172542746 exitmsg encode head
message dequeue, pos = 14, flag is 1
msg encode head
send data to fd 5, len is 48
send data success left should be 0: 0
message dequeue, pos = 15, flag is 1
msg encode head
send data to fd 6, len is 16
send d